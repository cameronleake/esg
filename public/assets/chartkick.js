(function(){"use strict";function e(e){return"[object Array]"===Object.prototype.toString.call(e)}function t(e){return e instanceof Object}function i(n,r){var s;for(s in r)t(r[s])||e(r[s])?(t(r[s])&&!t(n[s])&&(n[s]={}),e(r[s])&&!e(n[s])&&(n[s]=[]),i(n[s],r[s])):void 0!==r[s]&&(n[s]=r[s])}function n(e,t){var n={};return i(n,e),i(n,t),n}function r(e){var t,i,n,r,s,o,a,l,u,c,h;return c=Object.prototype.toString.call(e),"[object Date]"===c?e:"[object String]"===c?(n=e.match(S))?(h=parseInt(n[1],10),o=parseInt(n[3],10)-1,t=parseInt(n[5],10),i=parseInt(n[7],10),s=n[9]?parseInt(n[9],10):0,u=n[11]?parseInt(n[11],10):0,r=n[12]?1e3*parseFloat(D+n[12].slice(1)):0,l=Date.UTC(h,o,t,i,s,u,r),n[13]&&n[14]&&(a=60*n[15],n[17]&&(a+=parseInt(n[17],10)),a*="-"===n[14]?-1:1,l-=1e3*60*a),new Date(l)):void 0:void 0}function s(e){var t,i,n;for(t=0;e.length>t;t++)for(n=e[t].data,i=0;n.length>i;i++)if(0>n[i][1])return!0;return!1}function o(e,t,i,r){return function(o,a){var l=n({},e);return a.hideLegend&&t(l),"min"in a?i(l,a.min):s(o)||i(l,0),"max"in a&&r(l,a.max),l=n(l,a.library||{})}}function a(e,t){document.body.innerText?e.innerText=t:e.textContent=t}function l(e,t){a(e,"Error Loading Chart: "+t),e.style.color="#ff0000"}function u(e,t,i){$.ajax({dataType:"json",url:t,success:i,error:function(t,i,n){var r="string"==typeof n?n:n.message;l(e,r)}})}function c(e,t,i,n){try{n(e,t,i)}catch(r){throw l(e,r.message),r}}function h(e,t,i,n){"string"==typeof t?u(e,t,function(t){c(e,t,i,n)}):c(e,t,i,n)}function d(e){return""+e}function p(e){return parseFloat(e)}function f(e){if("object"!=typeof e)if("number"==typeof e)e=new Date(1e3*e);else{var t=e.replace(/ /,"T").replace(" ","").replace("UTC","Z");e=r(t)||new Date(e)}return e}function g(t){if(!e(t)){var i,n=[];for(i in t)t.hasOwnProperty(i)&&n.push([i,t[i]]);t=n}return t}function m(e,t){return e[0].getTime()-t[0].getTime()}function v(t,i,n){var r,s,o,a,l;for(!e(t)||"object"!=typeof t[0]||e(t[0])?(t=[{name:"Value",data:t}],i.hideLegend=!0):i.hideLegend=!1,r=0;t.length>r;r++){for(o=g(t[r].data),a=[],s=0;o.length>s;s++)l=o[s][0],l=n?f(l):d(l),a.push([l,p(o[s][1])]);n&&a.sort(m),t[r].data=a}return t}function y(e,t,i){x(e,v(t,i,!0),i)}function b(e,t,i){T(e,v(t,i,!1),i)}function _(e,t,i){var n,r=g(t);for(n=0;r.length>n;n++)r[n]=[d(r[n][0]),p(r[n][1])];C(e,r,i)}function w(e,t,i,n){"string"==typeof e&&(e=document.getElementById(e)),h(e,t,i||{},n)}var x,C,T,S=/(\d\d\d\d)(\-)?(\d\d)(\-)?(\d\d)(T)?(\d\d)(:)?(\d\d)?(:)?(\d\d)?([\.,]\d+)?($|Z|([\+\-])(\d\d)(:)?(\d\d)?)/i,D=String(1.5).charAt(1);if("Highcharts"in window){var k={xAxis:{labels:{style:{fontSize:"12px"}}},yAxis:{title:{text:null},labels:{style:{fontSize:"12px"}}},title:{text:null},credits:{enabled:!1},legend:{borderWidth:0},tooltip:{style:{fontSize:"12px"}}},M=function(e){e.legend.enabled=!1},I=function(e,t){e.yAxis.min=t},P=function(e,t){e.yAxis.max=t},E=o(k,M,I,P);x=function(e,t,i){var n,r,s,o=E(t,i);for(o.xAxis.type="datetime",o.chart={type:"spline",renderTo:e.id},r=0;t.length>r;r++){for(n=t[r].data,s=0;n.length>s;s++)n[s][0]=n[s][0].getTime();t[r].marker={symbol:"circle"}}o.series=t,new Highcharts.Chart(o)},C=function(e,t,i){var r=n(k,i.library||{});r.chart={renderTo:e.id},r.series=[{type:"pie",name:"Value",data:t}],new Highcharts.Chart(r)},T=function(e,t,i){var n,r,s,o,a=E(t,i),l=[];for(a.chart={type:"column",renderTo:e.id},n=0;t.length>n;n++)for(s=t[n],r=0;s.data.length>r;r++)o=s.data[r],l[o[0]]||(l[o[0]]=new Array(t.length)),l[o[0]][n]=o[1];var u=[];for(n in l)l.hasOwnProperty(n)&&u.push(n);a.xAxis.categories=u;var c=[];for(n=0;t.length>n;n++){for(o=[],r=0;u.length>r;r++)o.push(l[u[r]][n]);c.push({name:t[n].name,data:o})}a.series=c,new Highcharts.Chart(a)}}else if("google"in window){var A=!1;google.setOnLoadCallback(function(){A=!0}),google.load("visualization","1.0",{packages:["corechart"]});var N=function(e){google.setOnLoadCallback(e),A&&e()},k={fontName:"'Lucida Grande', 'Lucida Sans Unicode', Verdana, Arial, Helvetica, sans-serif",pointSize:6,legend:{textStyle:{fontSize:12,color:"#444"},alignment:"center",position:"right"},curveType:"function",hAxis:{textStyle:{color:"#666",fontSize:12},gridlines:{color:"transparent"},baselineColor:"#ccc"},vAxis:{textStyle:{color:"#666",fontSize:12},baselineColor:"#ccc",viewWindow:{}},tooltip:{textStyle:{color:"#666",fontSize:12}}},M=function(e){e.legend.position="none"},I=function(e,t){e.vAxis.viewWindow.min=t},P=function(e,t){e.vAxis.viewWindow.max=t},E=o(k,M,I,P),H=function(e,t){var i=new google.visualization.DataTable;i.addColumn(t,"");var n,r,s,o,a,l=[];for(n=0;e.length>n;n++)for(s=e[n],i.addColumn("number",s.name),r=0;s.data.length>r;r++)o=s.data[r],a="datetime"===t?o[0].getTime():o[0],l[a]||(l[a]=new Array(e.length)),l[a][n]=p(o[1]);var u=[];for(n in l)l.hasOwnProperty(n)&&u.push(["datetime"===t?new Date(p(n)):n].concat(l[n]));return"datetime"===t&&u.sort(m),i.addRows(u),i};x=function(e,t,i){N(function(){var n=E(t,i),r=H(t,"datetime"),s=new google.visualization.LineChart(e);s.draw(r,n)})},C=function(e,t,i){N(function(){var r=n(k,i.library||{});r.chartArea={top:"10%",height:"80%"};var s=new google.visualization.DataTable;s.addColumn("string",""),s.addColumn("number","Value"),s.addRows(t);var o=new google.visualization.PieChart(e);o.draw(s,r)})},T=function(e,t,i){N(function(){var n=E(t,i),r=H(t,"string"),s=new google.visualization.ColumnChart(e);s.draw(r,n)})}}else x=C=T=function(){throw new Error("Please install Google Charts or Highcharts")};var j={LineChart:function(e,t,i){w(e,t,i,y)},ColumnChart:function(e,t,i){w(e,t,i,b)},PieChart:function(e,t,i){w(e,t,i,_)}};window.Chartkick=j})();